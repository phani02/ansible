---
- hosts: webservers 
  become: yes
  tasks:

  - name: updating the packages
    yum:
      name: '*'
      state: latest 
    when: ansible_os_family == "Redhat"

  - name: updating packages in debian
    apt:
      update_cache: yes
    when: ansible_os_family == "Debian"

  - name: installing apache in redhat
    yum:
      name: httpd
      state: present
    notify: 
    - Restart Httpd
    when: ansible_os_family == "Redhat"

  - name: installing apache2 in debian
    apt:
      name: apache2
      state: present
    notify: 
    - Restart apache
    when: ansible_os_family == "Debian"

  - name: setting homepage
    copy:
     content: "hai frnds how are you welcome to the new page"
     dest: /var/www/html/index.html
   
  handlers:
  - name: Restart Httpd
    service:
      name: httpd
      state: restarted

  handlers:
  - name: Restart apache
    service:
      name: apache2
      state: restarted


